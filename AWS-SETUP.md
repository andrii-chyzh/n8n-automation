# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è FIN Flow –Ω–∞ AWS

–ü–æ–∫—Ä–æ–∫–æ–≤–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è FIN Flow –Ω–∞ AWS —Å–µ—Ä–≤–µ—Ä—ñ –∑ self-hosted n8n.io.

## –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- AWS EC2 —ñ–Ω—Å—Ç–∞–Ω—Å –∑ Ubuntu/Debian
- Docker –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π
- Self hosted n8n.io –∑–∞–ø—É—â–µ–Ω–∏–π –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ

## –ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
```bash
ssh -i your-key.pem ubuntu@your-server-ip
sudo su
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É—é—á–æ–≥–æ n8n
```bash
docker ps
# –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ n8n –∑–∞–ø—É—â–µ–Ω–∏–π
```

## –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–æ–±–æ—á–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó

```bash
mkdir -p /opt/n8n-setup
cd /opt/n8n-setup
```

## –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –ø—Ä–æ–µ–∫—Ç—É

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è build-and-run.sh
```bash
cat > build-and-run.sh << 'EOF'
#!/bin/bash

echo "üî® –ó–±—ñ—Ä–∫–∞ n8n –æ–±—Ä–∞–∑—É..."

# –ó—É–ø–∏–Ω—è—î–º–æ —ñ—Å–Ω—É—é—á–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
echo "‚èπÔ∏è  –ó—É–ø–∏–Ω—è—î–º–æ —ñ—Å–Ω—É—é—á–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä..."
docker stop n8n 2>/dev/null || true
docker rm n8n 2>/dev/null || true

# –ó–±–∏—Ä–∞—î–º–æ –Ω–æ–≤–∏–π –æ–±—Ä–∞–∑
echo "üèóÔ∏è  –ó–±–∏—Ä–∞—î–º–æ Docker –æ–±—Ä–∞–∑..."
docker build -t n8n-custom .

# –ó–∞–ø—É—Å–∫–∞—î–º–æ –Ω–æ–≤–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
echo "üöÄ –ó–∞–ø—É—Å–∫–∞—î–º–æ –Ω–æ–≤–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä..."
docker run -d -it --rm \
  --name n8n \
  -p 80:5678 \
  -e N8N_SECURE_COOKIE=false \
  -e WEBHOOK_URL=https://your_domain \
  -v n8n_data:/home/node/.n8n \
  n8n-custom

echo "‚úÖ –ì–æ—Ç–æ–≤–æ! Self hosted n8n –∑–∞–ø—É—â–µ–Ω–æ"
echo "üåê –î–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: https://your_domain"
echo ""
echo "üìã Code Node –≥–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!"
EOF

chmod +x build-and-run.sh
```

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Dockerfile
```bash
cat > Dockerfile << 'EOF'
FROM docker.n8n.io/n8nio/n8n:latest

USER node

RUN n8n --version
EOF
```

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è FIN Flow.json
```bash
# –°–∫–æ–ø—ñ—é–π—Ç–µ –≤–º—ñ—Å—Ç FIN Flow.json –∑ –ø—Ä–æ–µ–∫—Ç—É
# –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ n8n UI
```

## –ö—Ä–æ–∫ 4: –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫ n8n

### –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –∑–±—ñ—Ä–∫–∏
```bash
./build-and-run.sh
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π
docker ps

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏
docker logs n8n --tail 20

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å n8n
curl -I https://your_domain
```

## –ö—Ä–æ–∫ 5: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Dropbox

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Dropbox App
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ [Dropbox Developer Console](https://www.dropbox.com/developers)
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π App
3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ OAuth2 credentials
4. –°–∫–æ–ø—ñ—é–π—Ç–µ App Key —Ç–∞ App Secret

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞–ø–æ–∫ –Ω–∞ Dropbox
```bash
# –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–∞—Å—Ç—É–ø–Ω—ñ –ø–∞–ø–∫–∏ –≤ –∫–æ—Ä–µ–Ω—ñ Dropbox:
# /Excel_input - –¥–ª—è –≤—Ö—ñ–¥–Ω–∏—Ö XLSX —Ñ–∞–π–ª—ñ–≤
# /Invoices - –¥–ª—è –ø–æ—à—É–∫—É —ñ–Ω–≤–æ–π—Å—ñ–≤  
# /Parsing_excel_results - –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–∞—Ä—Å–∏–Ω–≥—É
# /Sorted_invoices_YYYY-MM-DD - —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–ª—è –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
```

**üìã –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—é –ø–∞–ø–æ–∫:** [DROPBOX-SETUP.md](DROPBOX-SETUP.md)

## –ö—Ä–æ–∫ 6: –Ü–º–ø–æ—Ä—Ç –≤–æ—Ä–∫—Ñ–ª–æ—É –≤ n8n

### –í—ñ–¥–∫—Ä–∏–π—Ç–µ n8n UI
```bash
# –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ n8n –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
https://your_domain
```

### –Ü–º–ø–æ—Ä—Ç –≤–æ—Ä–∫—Ñ–ª–æ—É
1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Import from file"
2. –í–∏–±–µ—Ä—ñ—Ç—å —Ñ–∞–π–ª `FIN Flow.json`
3. –í–æ—Ä–∫—Ñ–ª–æ—É –±—É–¥–µ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ –∑ –≥–æ—Ç–æ–≤–∏–º –∫–æ–¥–æ–º

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è credentials
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ Settings > Credentials
2. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π Dropbox OAuth2 credential
3. –í–≤–µ–¥—ñ—Ç—å App Key —Ç–∞ App Secret
4. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—è —á–µ—Ä–µ–∑ Dropbox

## –ö—Ä–æ–∫ 7: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–æ—Ä–∫—Ñ–ª–æ—É

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–æ–¥
–í–æ—Ä–∫—Ñ–ª–æ—É –º—ñ—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—É–ø–Ω—ñ –æ—Å–Ω–æ–≤–Ω—ñ –Ω–æ–¥–∏:
- **Manual Trigger** - –∑–∞–ø—É—Å–∫ –≤–æ—Ä–∫—Ñ–ª–æ—É
- **Get excel file name** - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ñ–∞–π–ª—ñ–≤ –∑ `/Excel_input`
- **Download a excel file** - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è XLSX —Ñ–∞–π–ª—É
- **Parse XLSX** - –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–∏—Ö
- **Search using FIN/ALT number** - –ø–æ—à—É–∫ —ñ–Ω–≤–æ–π—Å—ñ–≤ –≤ Dropbox
- **Filter only found ALT invoices** - —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç—ñ–ª—å–∫–∏ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —ñ–Ω–≤–æ–π—Å—ñ–≤
- **Merge FIN and ALT data** - –æ–±'—î–¥–Ω–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
- **Move invoice files to sorted folder** - –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
- **Convert data to excel file** - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤ XLSX
- **Upload excel file with results** - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –≤ `/Parsing_excel_results`

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Dropbox –Ω–æ–¥
–î–ª—è –∫–æ–∂–Ω–æ—ó Dropbox –Ω–æ–¥–∏:
1. –í–∏–±–µ—Ä—ñ—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–∏–π credential
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —à–ª—è—Ö–∏ –¥–æ –ø–∞–ø–æ–∫
3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Ñ—ñ–ª—å—Ç—Ä–∏ —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–æ—à—É–∫—É

## –ö—Ä–æ–∫ 8: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤
1. –†–æ–∑–º—ñ—Å—Ç—ñ—Ç—å XLSX —Ñ–∞–π–ª –≤ –ø–∞–ø—Ü—ñ `/Excel_input` –Ω–∞ Dropbox
2. –†–æ–∑–º—ñ—Å—Ç—ñ—Ç—å –∫—ñ–ª—å–∫–∞ —ñ–Ω–≤–æ–π—Å—ñ–≤ –≤ –ø–∞–ø—Ü—ñ `/Invoices` –Ω–∞ Dropbox
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –Ω–∞–∑–≤–∏ —Ñ–∞–π–ª—ñ–≤ –º—ñ—Å—Ç—è—Ç—å FIN –∞–±–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –Ω–æ–º–µ—Ä–∏

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—É
1. –ê–∫—Ç–∏–≤—É–π—Ç–µ –≤–æ—Ä–∫—Ñ–ª–æ—É –≤ n8n UI
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Execute workflow"
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤ Execution Log

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–∞–ø–∫—É `/Parsing_excel_results` –Ω–∞ Dropbox
2. –ó–Ω–∞–π–¥—ñ—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–∏–π Excel —Ñ–∞–π–ª –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–∞–ø–∫—É `/Sorted_invoices_YYYY-MM-DD` - —Ç–∞–º –±—É–¥—É—Ç—å —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω—ñ –∑–Ω–∞–π–¥–µ–Ω—ñ —Ñ–∞–π–ª–∏
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å —Å—Ç–∞—Ç—É—Å—ñ–≤ OK/NOK

## –ö—Ä–æ–∫ 9: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è production

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Python Code node not found"
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è n8n –≤–µ—Ä—Å—ñ—ó 1.103.2+
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ Python Code node –¥–æ—Å—Ç—É–ø–Ω–∏–π –≤ —Å–ø–∏—Å–∫—É –Ω–æ–¥

### –ü—Ä–æ–±–ª–µ–º–∞: "No data rows found"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É XLSX —Ñ–∞–π–ª—É
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –¥–∞–Ω—ñ –Ω–µ –ø–æ—á–∏–Ω–∞—é—Ç—å—Å—è –∑ –ø–µ—Ä—à–∏—Ö 5 —Ä—è–¥–∫—ñ–≤

### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid shared string index"
- –§–∞–π–ª –º–æ–∂–µ –º–∞—Ç–∏ –ø–æ—à–∫–æ–¥–∂–µ–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –°–ø—Ä–æ–±—É–π—Ç–µ –∑–±–µ—Ä–µ–≥—Ç–∏ —Ñ–∞–π–ª –∑–∞–Ω–æ–≤–æ –≤ Excel

### –ü—Ä–æ–±–ª–µ–º–∞: Dropbox –ø–æ–º–∏–ª–∫–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ OAuth2 credentials
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –ø–∞–ø–∫–∏ `/Excel_input`, `/Invoices`, `/Parsing_excel_results` —ñ—Å–Ω—É—é—Ç—å
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ–∞–π–ª—ñ–≤

### –ü—Ä–æ–±–ª–µ–º–∞: –§–∞–π–ª–∏ –Ω–µ –∫–æ–ø—ñ—é—é—Ç—å—Å—è
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∑–Ω–∞–π–¥–µ–Ω—ñ —Ñ–∞–π–ª–∏ —ñ—Å–Ω—É—é—Ç—å –≤ `/Invoices`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å —à–ª—è—Ö—ñ–≤ —É `pathDisplay`

### –ü—Ä–æ–±–ª–µ–º–∞: "Docker build failed"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ Docker –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π
- –°–ø—Ä–æ–±—É–π—Ç–µ –æ—á–∏—Å—Ç–∏—Ç–∏ Docker cache: `docker system prune -a`

## –ü–µ—Ä–µ–≤–∞–≥–∏ —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É

‚úÖ **–ú—ñ–Ω—ñ–º–∞–ª—ñ–∑–º** - –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î —Ç—ñ–ª—å–∫–∏ Python3, –±–µ–∑ –∑–∞–π–≤–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫  
‚úÖ **–®–≤–∏–¥–∫—ñ—Å—Ç—å** - —à–≤–∏–¥–∫–∞ –∑–±—ñ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑—É  
‚úÖ **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É Python  
‚úÖ **–ë–µ–∑–ø–µ–∫–∞** - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∑–æ–≤–Ω—ñ—à–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏  
‚úÖ **–ì–Ω—É—á–∫—ñ—Å—Ç—å** - –ª–µ–≥–∫–æ –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –∫–æ–¥  
‚úÖ **–ö–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å** - –æ–±—Ä–æ–±–ª—è—î –¥–∞–Ω—ñ –ª–æ–∫–∞–ª—å–Ω–æ  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è** - –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª –≤—ñ–¥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–æ –µ–∫—Å–ø–æ—Ä—Ç—É  

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–î–ª—è –ø–∏—Ç–∞–Ω—å —Ç–∞ –ø—Ä–æ–±–ª–µ–º:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ n8n: `docker logs n8n --tail 100`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Docker: `docker logs n8n 2>&1 | grep -i error`
3. –î–æ–¥–∞–π—Ç–µ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ñ print statements –≤ Python –∫–æ–¥
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É XLSX —Ñ–∞–π–ª—É —Ç–∞ Dropbox –ø–∞–ø–æ–∫ 